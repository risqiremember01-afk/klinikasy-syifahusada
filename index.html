<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kritik & Saran - Klinik Asy-Syifa Husada</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Palet Warna Klinik BARU (Biru) */
        :root {
            --primary-color: #004080; /* Biru Gelap/Navy */
            --secondary-color: #5bc0de; /* Biru Cerah/Cyan */
            --background-color: #e0f7fa; /* Biru cerah */
            --text-color: #333;
            --button-hover: #00264d; /* Biru lebih gelap untuk hover */
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        body { 
            font-family: 'Poppins', sans-serif; 
            margin: 0; 
            padding: 0; 
            background-color: var(--background-color); 
            color: var(--text-color);
        }

        /* HEADER & HERO SECTION */
        header { 
            text-align: center; 
            padding: 40px 20px 20px; 
            /* Linear gradient menggunakan palet biru baru */
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
        }
        
        .logo-container {
            margin-bottom: 20px;
        }

        .logo-placeholder {
            width: 100px;
            height: 100px;
            background-color: white;
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color); /* Tetap menggunakan primary color biru */
            font-weight: bold;
            font-size: 24px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border: 3px solid white;
            line-height: 1.2;
            padding: 10px;
        }

        header h1 {
            font-size: 2.5em;
            margin-top: 0;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* CTA BUTTONS */
        .cta-buttons {
            text-align: center; 
            margin-bottom: 40px;
        }
        
        .cta-buttons h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 1.5em;
        }

        .cta-buttons button { 
            padding: 15px 35px; 
            margin: 10px; 
            font-size: 1.1em; 
            cursor: pointer; 
            background-color: var(--secondary-color); 
            color: white; 
            border: none; 
            border-radius: 50px; 
            transition: all 0.3s ease;
            font-weight: 600;
            /* Box shadow menggunakan primary color biru */
            box-shadow: 0 4px 15px rgba(0, 64, 128, 0.4);
        }

        .cta-buttons button:hover, .cta-buttons button.active {
            background-color: var(--primary-color);
            transform: translateY(-3px);
             /* Box shadow menggunakan primary color biru */
            box-shadow: 0 6px 20px rgba(0, 64, 128, 0.6);
        }
        
        @media (max-width: 600px) {
            .cta-buttons button {
                display: block;
                width: 80%;
                margin: 10px auto;
            }
        }


        /* FORM CONTAINER */
        .form-container { 
            max-width: 800px;
            margin: 0 auto 50px auto;
            background-color: white; 
            padding: 40px; 
            border-radius: 12px; 
            box-shadow: var(--box-shadow);
        }

        .form-container h2 {
            color: var(--primary-color);
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .form-group { 
            margin-bottom: 20px; 
        }

        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            color: var(--primary-color); 
        }

        input[type="text"], input[type="date"], input[type="number"], select, textarea { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            box-sizing: border-box; 
            transition: border-color 0.3s, box-shadow 0.3s;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--secondary-color);
            /* Box shadow menggunakan secondary color biru */
            box-shadow: 0 0 5px rgba(91, 192, 222, 0.5);
            outline: none;
        }

        textarea { 
            resize: vertical; 
        }
        
        input[type="radio"] + label {
            color: var(--text-color);
        }

        /* SUBMIT BUTTON & LOADING */
        .btn-submit {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .btn-submit:hover {
            background-color: var(--button-hover);
        }

        .btn-submit:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .hidden { display: none; }

        /* CUSTOM MODAL FOR MESSAGES */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-box {
            background: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-box {
            transform: translateY(0);
        }

        .modal-icon {
            font-size: 50px;
            margin-bottom: 10px;
        }

        .modal-title {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .modal-close {
            margin-top: 20px;
            padding: 10px 25px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

    </style>
</head>
<body>

    <header>
        <div class="logo-container">
            <div class="logo-kotak"> KLINIK ASY-SYIFA HUSADA</div>
        </div>
        <h1>FORMULIR KRITIK DAN SARAN</h1>
        <p>PELAYANANKU ADALAH IBADAHKU SEMOGA LEKAS SEMBUH</p>
    </header>

    <div class="cta-buttons">
        <h2>Pilih Jenis Pelayanan yang Anda Terima:</h2>
        <button id="showRawatJalan">Pasien Rawat Jalan(Poliklinik)</button>
        <button id="showRawatInap">Pasien Rawat Inap (Kamar)</button>
    </div>

    <div class="form-container">
        
        <div id="welcomeMessage" style="text-align: center; color: #666; padding: 20px;">
            <p>Silakan pilih kategori pasien di atas untuk mengisi formulir.</p>
        </div>

        <form id="formRawatJalan" class="hidden" name="submit-to-google-sheet-rj">
            <h2>Formulir Pengaduan Pelayanan Rawat Jalan</h2>
            
            <input type="hidden" name="form_type" value="rawat_jalan">

            <div class="form-group">
                <label for="rj_nama">Nama Lengkap (Opsional)</label>
                <input type="text" id="rj_nama" name="nama" placeholder="Cth: Budi Santoso">
            </div>

            <div class="form-group">
                <label for="rj_tanggal_kunjungan">Tanggal Kunjungan <span style="color: red;">*</span></label>
                <input type="date" id="rj_tanggal_kunjungan" name="tanggal_kunjungan" required>
            </div>

            <div class="form-group">
                <label for="rj_jenis_layanan">Fokus pelayanan <span style="color: red;">*</span></label>
                <select id="rj_jenis_layanan" name="jenis_layanan" required>
                    <option value="">-- Pilih Bagian Layanan --</option>
                    <option value="Administrasi">Pendaftaran/Administrasi</option>
                    <option value="Dokter">Pelayanan Dokter umum</option>
                    <option value="Perawat">Pelayanan Perawat/Asisten</option>
                    <option value="Farmasi">Farmasi/Obat</option>
                    <option value="Poli Umum">Pelayanan Poli Umum</option>
                    <option value="Poli KIA">Pelayanan Poli KIA</option>
                    <option value="Dokter Gigi">Pelayanan Dokter Gigi</option>
                    <option value="Lainnya">Lainnya</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Jenis Pasien <span style="color: red;">*</span></label>
                <div style="margin-top: 5px;">
                    <input type="radio" id="rj_BPJS" name="jenis_pasien" value="BPJS" required>
                    <label for="rj_BPJS" style="display: inline; font-weight: normal; margin-right: 15px;">BPJS</label>
                    <input type="radio" id="rj_UMUM" name="jenis_pasien" value="UMUM" required>
                    <label for="rj_UMUM" style="display: inline; font-weight: normal;">UMUM</label>
                </div>
            </div>

            <div class="form-group">
                <label for="rj_saran_judul">Saran Anda <span style="color: red;">*</span></label>
                <input type="text" id="rj_saran_Anda" name="judul_masukan" placeholder="Cth: Antrian Farmasi Terlalu Lama" required>
            </div>

            <div class="form-group">
                <label for="rj_kritik_Anda">Kritik Anda <span style="color: red;">*</span></label>
                <textarea id="rj_kritik_Anda" name="detail_masukan" rows="6" maxlength="500" required placeholder="Jelaskan secara spesifik agar kami dapat menindaklanjuti."></textarea>
            </div>
            <button type="submit" class="btn-submit">
                <span class="btn-text">Kirim Masukan Rawat Jalan</span>
            </button>
        </form>

        <form id="formRawatInap" class="hidden" name="submit-to-google-sheet-ri">
            <h2>Formulir Pengaduan Pelayanan Rawat Inap</h2>

            <input type="hidden" name="form_type" value="rawat_inap">
            
            <div class="form-group">
                <label for="ri_nama">Nama Pasien/Penanggung Jawab (Opsional)</label>
                <input type="text" id="ri_nama" name="nama" placeholder="Cth: Pasien An. Budi Santoso">
            </div>

            <div class="form-group">
                <label for="ri_tanggal_keluar">Tanggal Keluar/Perkiraan Keluar <span style="color: red;">*</span></label>
                <input type="date" id="ri_tanggal_keluar" name="tanggal_keluar" required>
            </div>
            
            <div class="form-group">
                <label for="ri_no_kamar">Nomor Kamar/Bangsal (Opsional)</label>
                <input type="text" id="ri_no_kamar" name="no_kamar" placeholder="Cth: Ruang Melati 3">
            </div>
            <div class="form-group">
                <label>Jenis Pasien <span style="color: red;">*</span></label>
                <div style="margin-top: 5px;">
                    <input type="radio" id="ri_BPJS" name="jenis_pasien" value="BPJS" required>
                    <label for="ri_BPJS" style="display: inline; font-weight: normal; margin-right: 15px;">BPJS</label>
                    <input type="radio" id="ri_UMUM" name="jenis_pasien" value="UMUM" required>
                    <label for="ri_UMUM" style="display: inline; font-weight: normal;">UMUM</label>
                </div>
            <div class="form-group">
                <label for="ri_jenis_layanan">Fokus pelayanan <span style="color: red;">*</span></label>
                <select id="ri_jenis_layanan" name="jenis_layanan" required>
                    <option value="">-- Pilih Bagian Layanan --</option>
                    <option value="Perawat">Pelayanan Perawat</option>
                    <option value="Dokter">Pelayanan Dokter Jaga/Visite</option>
                    <option value="Fasilitas">Fasilitas & Kebersihan Kamar</option>
                    <option value="Gizi">Makanan/Gizi Pasien</option>
                    <option value="Administrasi">Administrasi Billing/Kepulangan</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="ri_rating">Rating Pelayanan (1=Buruk, 5=Sangat Baik) <span style="color: red;">*</span></label>
                <input type="number" id="ri_rating" name="rating_pelayanan" min="1" max="5" placeholder="Masukkan angka 1-5" required>
            </div>
            
            <div class="form-group">
                <label for="ri_kritik">Kritik Anda<span style="color: red;">*</span></label>
                <textarea id="ri_kritik" name="kritik" rows="6" maxlength="500" required placeholder="Jelaskan spesifik: shift (pagi/siang/malam), nama petugas (jika tahu)."></textarea>
            </div>
            
            <div class="form-group">
                <label for="ri_saran">Saran Anda<span style="color: red;">*</span></label>
                <textarea id="ri_saran" name="saran" rows="6" maxlength="500" required placeholder="Jelaskan usulan perbaikan Anda."></textarea>
            </div>
            
            <button type="submit" class="btn-submit">
                <span class="btn-text">Kirim Masukan Rawat Inap</span>
            </button>
        </form>

    </div>

    <div id="statusModal" class="modal-overlay">
        <div class="modal-box">
            <div id="modalIcon" class="modal-icon">✅</div>
            <div id="modalTitle" class="modal-title">Terima Kasih!</div>
            <p id="modalMessage">Masukan Anda telah kami terima.</p>
            <button class="modal-close" onclick="closeModal()">Tutup</button>
        </div>
    </div>

    <script>
    // URL Google Apps Script (pastikan ini benar)
    const scriptURL = 'https://script.google.com/macros/s/AKfycbz-k9ACMetmjCjHY9pB4gpMIFSKLKDJmgoKpQ6Jf3X_xAQf3EB-QdStzLgy_BtLuv4K/exec';

    const formRawatJalan = document.getElementById('formRawatJalan');
    const formRawatInap = document.getElementById('formRawatInap');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const btnRawatJalan = document.getElementById('showRawatJalan');
    const btnRawatInap = document.getElementById('showRawatInap');
    const modal = document.getElementById('statusModal');

    // Toggle Form Visibility
    function toggleForm(showRJ) {
        btnRawatJalan.classList.remove('active');
        btnRawatInap.classList.remove('active');
        welcomeMessage.style.display = 'none';

        if (showRJ) {
            formRawatJalan.classList.remove('hidden');
            formRawatInap.classList.add('hidden');
            btnRawatJalan.classList.add('active');
            formRawatJalan.scrollIntoView({ behavior: 'smooth' });
        } else {
            formRawatInap.classList.remove('hidden');
            formRawatJalan.classList.add('hidden');
            btnRawatInap.classList.add('active');
            formRawatInap.scrollIntoView({ behavior: 'smooth' });
        }
    }

    btnRawatJalan.addEventListener('click', () => toggleForm(true));
    btnRawatInap.addEventListener('click', () => toggleForm(false));

    // Handle Submission Logic
    function handleFormSubmit(e, formElement) {
        e.preventDefault();

        const btn = formElement.querySelector('.btn-submit');
        const originalText = btn.innerHTML;

        // Loading State
        btn.disabled = true;
        btn.innerHTML = '<span class="btn-text">Mengirim...</span>';

        fetch(scriptURL, { method: 'POST', body: new FormData(formElement) })
            .then(response => {
                showModal('success', 'Terima Kasih!', 'Masukan Anda telah kami terima. Kami akan menindaklanjutinya.');
                formElement.reset();
            })
            .catch(error => {
                console.error('Error:', error);
                showModal('error', 'Gagal Mengirim', 'Terjadi kesalahan saat mengirim data. Silakan coba lagi.');
            })
            .finally(() => {
                btn.disabled = false;
                btn.innerHTML = originalText;
            });
    }

    formRawatJalan.addEventListener('submit', (e) => handleFormSubmit(e, formRawatJalan));
    formRawatInap.addEventListener('submit', (e) => handleFormSubmit(e, formRawatInap));

    // Modal Logic
    function showModal(type, title, message) {
        const icon = document.getElementById('modalIcon');
        const titleEl = document.getElementById('modalTitle');
        const msgEl = document.getElementById('modalMessage');

        icon.innerText = type === 'success' ? '✅' : '❌';
        titleEl.style.color = type === 'success' ? 'var(--primary-color)' : 'red';
        titleEl.innerText = title;
        msgEl.innerText = message;
        modal.classList.add('active');
    }

    function closeModal() {
        modal.classList.remove('active');
    }
</script>

</body>
</html>
